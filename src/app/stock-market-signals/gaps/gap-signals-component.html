<div class="ui-g ui-fluid" >
    <div>
        <h3>Symbols</h3>
        <p-autoComplete [(ngModel)]="texts" [suggestions]="filteredSymbolsMultiple"
                        [minLength]="1" placeholder="Symbols"  (completeMethod)="filterSymbolsMultiple($event)"
                        [multiple]="true"></p-autoComplete>
    </div>
    <div>
        <div style="text-align: center">Exchanges:</div>
        <p-selectButton [style]="{'width': '250px', 'font-size': '13px' }"
                        multiple="multiple"
                        [options]="exchanges"
                        [(ngModel)]="selectedExchanges">
        </p-selectButton>
    </div>

    <div>
        <h3>Price Range: {{rangeValues[0] + ' - ' + rangeValues[1]}}</h3>
        <p-slider [max]="2000" [(ngModel)]="rangeValues" [style]="{'width':'200px'}" [range]="true"></p-slider>
    </div>

    <div>
        <h3>Capitalization</h3>
        <p-multiSelect [options]="caps" [(ngModel)]="selectedCaps"></p-multiSelect>
    </div>
    <div>number of pages: <h2>{{numberOfPages}}</h2></div>

    <div>Page size: <h2>{{pageSize}}</h2></div>
    <div>Total Gaps Signals: <h2>{{totalGaps}}</h2></div>
    <div>Total Symbols: <h2>{{totalSignalsInCurrentPage}}</h2></div>

    <p-dataTable [value]="groupedSignals"
             [(selection)]="selectedGapSignal"
             selectionMode="single"
             (onRowSelect)="onSignalSelect($event)"
             expandableRows="true"
             scrollable="true"
             scrollHeight="500px"
             >

    <p-column expander="true" styleClass="col-icon"></p-column>
    <p-column field="symbol" header="Symbol"></p-column>
    <p-column field="close" header="Last Signal Close"></p-column>
    <p-column field="quantity" header="Quantity"></p-column>
    <p-column styleClass="col-button">
        <ng-template let-sig="rowData" pTemplate="body">
            <button type="button" pButton (click)="navigateToChart(sig)" icon="ui-icon-multiline-chart"></button>
        </ng-template>
    </p-column>

        <ng-template let-signal pTemplate="rowexpansion">

            <div class="ui-grid ui-grid-responsive ui-fluid" style="font-size:16px;padding:20px">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-3" style="text-align:center">
                        <img src="http://www.nasdaq.com/logos/{{signal.symbol}}.GIF">
                    </div>
                    <div class="ui-grid-col-9">
                        <div class="ui-grid ui-grid-responsive ui-grid-pad">
                            <p-dataTable [value]="signal.signals" >
                                <p-column field="close" header="Close"></p-column>
                                <p-column field="movingAvg10" header="Moving Avg 10"></p-column>

                                <p-column header="Date">
                                    <ng-template let-col let-signal="rowData" pTemplate="body">
                                        <span>{{signal.dateStr | date :'longDate'}}</span>
                                    </ng-template>
                                </p-column>

                            </p-dataTable>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>
    </p-dataTable>
    <p-paginator [rows]="pageSize" [totalRecords]="totalGaps" (onPageChange)="paginate($event)" pageLinkSize="3"></p-paginator>
</div>